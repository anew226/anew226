<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets\css\lib\prism.css">
  <link rel="stylesheet" href="assets\css\style.css">
  <link rel="shortcut icon" type="image/png" href="assets\pics\favicon.png"/>
  <title>Keyboard Events Tool</title>
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="assets\pages\keydown.html">Keydown</a></li>
        <li><a href="assets\pages\keypress.html">Keypress</a></li>
        <li><a href="assets\pages\keyup.html">Keyup</a></li>
      </ul>
    </nav>
    <h1>Keyboard Events for Web Developers</h1>
  </header>
  <section>
    <article>
      <!-- intro -->
      <p>Typing on a keyboards is still one of the main ways people interact with computers. A keyboard event is triggered when a user presses any key on a keyboard. This is the basis for how many apps work: the user presses a key, and a character is 'printed' to the screen. Or, a user presses 'Enter' and a form is submitted.</p>
      <p>Did you know, keyboard events are not a part of JavaScript, but they are actually a part of the Browser API?</p>
      <p>The Browser API enables users to interact with webpages and web applications in the browser. Web browsers use '<em>events</em>' to serve as an interface between users and the web.</p>

      <h2>There are 3 types of keyboard events:</h2>
      <ul>
        <li>keydown() - fires when a key is <em>down</em></li>
        <li>*keypress() - fires when a <em>printable</em> character is made</li>
        <li>keyup() - fires when a key is <em>released</em></li>
      </ul>
      <p><sup>*keypress() has been deprecated: it is no longer a part of the web standard. Even though almost all browsers currently support keypress (as of 2022), they no longer are required to. Avoid using keypress in production.</sup></p>

      <h3>Let's Write Some Code!</h3>
      <p>First, let's start by creating a form that we can interact with.</p>
      <p>Create an empty HTML file (I'll call my file 'key.html', but you can call yours whatever you'd like), and add the following:</p>
<!-- Prism Code Snippet Box for Markup (HTML) with Syntax Highlighting -->
<pre><code class="language-html">&#60;!DOCTYPE html>
&#60;html>
&#60;head>
  &#60;title>Keyboard Events&#60;/title>
&#60;/head>
&#60;body>
  &#60;form>
    &#60;label for="CharInput_kd">text input:&#60;/label>
    &#60;input id="CharInput_kd" type="text">
  &#60;/form>

  &#60;script src="app.js">&#60;/script>
&#60;/body>
&#60;/html>
</code></pre>
      <p>Here we have a form with a label and an input. And, at the bottom, we have a script tag linking our HTML file with a JavaScript file (that we will create).</p>

      <p>Next, let's create our <em>app.js</em> file and add the following:</p>
<!-- Prism Code Snippet Box for JS with Syntax Highlighting -->
<pre><code class="language-js">// create variable named input and assign it 
// to HTML form input with id="CharInput_kd"
let userInput = document.querySelector("input");

// add a keydown event listener to input
// add an anonymous callback function that 
// will print "a key was pressed" to console  
// when the keydown event is triggered
userInput.addEventListener("keydown", function() {
    console.log("a key was pressed");
});
</code></pre>
      <p>After you saved both those file, open your 'key.html' file in a browser and open the 'console' in the Developer tools.</p>
      <p>There are several ways to open Developer tools in your browser:</p>
      <ul>
        <li>F12 (this is probably the easiest method)</li>
        <li>Crtl + Shift + I</li>
        <li>Or, usually, in the top right-hand corner, you should be able to open the browser's application menu. Click on 'More tools' (this will open a sub-menu), then click on 'Developer tools' (sometimes it's called 'Web Developer Tools')</li>
      </ul>
      <p>Often, when opening your Developer tools for the first time, it will open up to the default 'Elements' tab (also sometimes called 'Inspector').</p>
      <p>You should see a tab called 'Console', click on it &mdash; you are now in the right place.</p>
      <p>If, for some reason, you do not see the 'Console' tab, you can usually find it by clicking on the chevrons '&#62;&#62;' in the main menu bar at the top of your Developer tools. Or, if you're in Firefox, you can simple press 'Crtl + Shift + K'</p>
      <p>Now, try typing something in the text input field.</p>
      <p>You should see something like this:</p>
      <figure>
        <img loading="lazy" src="assets/pics/devTools_console.jpg" alt="screenshot of 'key.html' open in browser with Dev Tools opened to Console tab">
      </figure>

      <h3>console.log the global event</h3>
      <p>Let's try something a little more useful than printing "a key was pressed" to the console. Let's print the actual <em>event</em> to the console!</p>
      <p>Let's edit our 'app.js' file:</p>
<!-- Prism Code Snippet Box for JS with Syntax Highlighting -->
<pre><code class="language-js">let userInput = document.querySelector("input");

userInput.addEventListener("keydown", function(e) {
    console.log(e);
});
</code></pre>
      <p>Refresh your browser and then type something into the text input.</p>
      <p>As you can see, now the <em>event</em> has been printed to the console. If you expand the event, you can explore all its Properties.</p>
<!-- Prism Code Snippet Box for JS with Syntax Highlighting -->
<pre><code class="language-js">&#11206;KeyboardEvent {isTrusted: true, key: 'j', code: 'KeyJ', location: 0, ctrlKey: false, ...}
    isTrusted: true
    altKey: false
    bubbles: true
    cancelBubble: false
    cancelable: true
    charCode: 0
    code: "KeyJ"
    composed: true
    ctrlKey: false
    currentTarget: null
    defaultPrevented: false
    detail: 0
    eventPhase: 0
    isComposing: false
    key: "j"
    keyCode: 74
    location: 0
    metaKey: false
  &#11208;path: (6) [input#CharInput_kd, form, body, html, document, Window]
    repeat: false
    returnValue: true
    shiftKey: false
  &#11208;sourceCapabilities: InputDeviceCapabilities {firesTouchEvents: false}
  &#11208;srcElement: input#CharInput_kd
  &#11208;target: input#CharInput_kd
    timeStamp: 2002.4000000357628
    type: "keydown"
  &#11208;view: Window {window: Window, self: Window, document: document, name: '', location: Locat
    which: 74
  &#11208;[[Prototype]]: KeyboardEvent
</code></pre>
      <p>The reason this prints the event to the console is because 'e' give access to <em>window.event</em>.</p>
      <p>In fact, you could rewrite the function using <em>window.event</em> instead of using 'e' as an argument in the anonymous function.</p>
<!-- Prism Code Snippet Box for JS with Syntax Highlighting -->
<pre><code class="language-js">let userInput = document.querySelector("input");

userInput.addEventListener("keydown", function() {
    console.log(window.event);
});
</code></pre>
      <p>Try it out!</p>

      <h3>Which Property Should I Use in my Code?</h3>
      <p>The short answer is: use either '<em>key</em>' or '<em>code</em>' when available, and avoid using '<em>which</em>', '<em>keyCode</em>', or '<em>charCode</em>'.</p>

      <p>Current:</p>
      <ul>
        <li>key</li>
        <li>code</li>
      </ul>

      <p>Non-standard / Deprecated:</p>
      <ul>
        <li>which</li>
        <li>keyCode</li>
        <li>charCode</li>
      </ul>

      <p>According to the Mozilla Developer Network (MDN):</p>
      <ul>
        <li>key - returns a DOMString representing the <em>key value of the key</em> represented by the event
          <ul>
            <li>Example: j</li>
          </ul>
        </li>
        <li>code - returns a DOMString with the <em>code value of the physical key</em> represented by the event
          <ul>
            <li>Example: KeyJ</li>
          </ul>
        </li>
        <li>which - returns a Number representing a system and implementation dependent numeric code identifying the unmodified value of the pressed key; this is usually the same as '<em>keyCode</em>'
          <ul>
            <li>Example: 106</li>
          </ul>
        </li>
        <li>keyCode - returns a Number representing a system and implementation dependent numerical code identifying the unmodified value of the pressed key.
          <ul>
            <li>Example: 106</li>
          </ul>
        </li>
        <li>charCode - returns a Number representing the Unicode reference number of the key; this attribute is used only by the keypress() event. For keys whose <em>char</em> attribute contains multiple characters, this is the Unicode value of the first character in that attribute. In Firefox 26 this returns codes for printable characters.
          <ul>
            <li>Example: 106</li>
          </ul>
        </li>
      </ul>

      <p>One exception is when using jQuery. If you take a look at the examples in jQuery's documentation, you see that they are still using 'which'.</p>
<!-- Prism Code Snippet Box for JS with Syntax Highlighting -->
<pre><code class="language-js">var xTriggered = 0;
$( "#target" ).keydown(function( event ) {
    if ( event.which == 13 ) {
        event.preventDefault();
    }
    xTriggered++;
    var msg = "Handler for .keydown() called " + xTriggered + " time(s).";
    $.print( msg, "html" );
    $.print( event );
});
</code></pre>
      <blockquote>
        <p>While browsers use differing properties to store this information, jQuery normalizes the <em>.which</em> property so you can reliably use it to retrieve the key code.</p>
        <p><sup><a href="https://api.jquery.com/keydown/" target="_blank" rel="noopener noreferrer">jQuery docs: .keydown()</a></sup></p>
      </blockquote>

      <h3>Listening for a Specific Key </h3>
      <p>We can create logic to make something happen when a specific key is presses.</p>
      <p>Let's edit our 'app.js' file again:</p>
<!-- Prism Code Snippet Box for JS with Syntax Highlighting -->
<pre><code class="language-js">let userInput = document.querySelector("input");

userInput.addEventListener("keydown", function(e) {
    if (e.key === "a") {
        document.querySelector("body").style.backgroundColor = "lightblue";
    } else if (e.key === "A") {
        document.querySelector("body").style.backgroundColor = "darkblue";
    }
});
</code></pre>
      <p>Refresh your 'key.html' page and try typing into the text input. As you can see, only when you type the characters 'a' or 'A' does the background change colour.</p>
      <p>Play around with the code. Use your imagination. You can use Keyboard Events to trigger all sorts of interactions with the browser.</p>
      <p>Check out these fun examples:</p>
      <ul>
        <li><a href="https://patatap.com/" target="_blank" rel="noopener noreferrer">patatap.com</a></li>
        <li><a href="https://recursivearts.com/virtual-piano/" target="_blank" rel="noopener noreferrer">Virtual Piano at recursivearts.com</a> (select the 'KEYS' button on the virtual piano to see how the piano can be played using your keyboard)</li>
      </ul>

      <h3>Submitting forms with with Enter key</h3>
      <p>There are a lot of posts showing how to submit a form using the 'Enter' key.</p>
      <p>However,</p>
      <blockquote>
        <p>The submit event fires when the user clicks a submit button (&#60;button&#62; or &#60;input type="submit"&#62;) or presses Enter while editing a field (e.g. &#60;input type="text"&#62;) in a form.</p>
        <p><sup><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event" target="_blank" rel="noopener noreferrer">HTMLFormElement: submit event (MDN)</a></sup></p>
      </blockquote>
      <p>So, the form will be submitted when a user hits the 'Enter' key while the user is focused in the form. You don't need to write any JavaScript because it's already baked into the browser.</p>
      <p>Let's try it out.</p>
      <p>First, let's add the 'action' attribute to our form tag. For fun, let's have the form send us to a wikipedia article when it's submitted. (Usually, you would send the action request to your backend database after it has been validated).</p>
<!-- Prism Code Snippet Box for Markup (HTML) with Syntax Highlighting -->
<!-- Note: beginning of each tag needs to be escaped using either &#60; or &lt; -->
<pre><code class="language-html">&#60;!DOCTYPE html>
&#60;html>
  &#60;head>
    &#60;title>Keyboard Events&#60;/title>
  &#60;/head>
  &#60;body>
    &#60;form action="https://en.wikipedia.org/wiki/Event_(computing)">
      &#60;label for="CharInput_kd">text input:&#60;/label>
      &#60;input id="CharInput_kd" type="text">
      &#60;input type="submit">
    &#60;/form>

    &#60;script src="app.js">&#60;/script>
  &#60;/body>
&#60;/html>
</code></pre>
      <p>As you can see, you can submit the form by either pressing the 'Submit' button, or by pressing the 'Enter' key.</p>
      <p>So, let's say that you wanted to disable the browser's default. Maybe you don't want the form to submit when you press 'Enter'. Let's write a little JavaScript to prevent the default.</p>
      <p>Let's edit our 'app.js' file:</p>
<!-- Prism Code Snippet Box for JS with Syntax Highlighting -->
<pre><code class="language-js">let userInput = document.querySelector("input");

userInput.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
        e.preventDefault();
        console.log("Enter was pressed");
    }
});
</code></pre>
      <p>As you can see, when 'Enter' is pressed the form is no longer submitted. Only 'Enter was pressed' is printed to the console.</p>

      <h3>Great online resources:</h3>
      <p>Here's a list of sites and articles I used to write this post.</p>
      <p>As always, MDN is a wealth of information. Check out these articles on MDN if you want to take a deep dive:</p>
      <ul>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code" target="_blank" rel="noopener noreferrer">KeyboardEvent.code</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode" target="_blank" rel="noopener noreferrer">KeyboardEvent.keyCode</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/which" target="_blank" rel="noopener noreferrer">UIEvent.which</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key" target="_blank" rel="noopener noreferrer">KeyboardEvent.key</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/keydown_event" target="_blank" rel="noopener noreferrer">Document: keydown event</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/keypress_event" target="_blank" rel="noopener noreferrer">Document: keypress event</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/keyup_event" target="_blank" rel="noopener noreferrer">Document: keyup envent</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" target="_blank" rel="noopener noreferrer">Document Object Model (DOM)</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event" target="_blank" rel="noopener noreferrer">HTMLFormElement: submit event</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Event" target="_blank" rel="noopener noreferrer">Event (MDN)</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent" target="_blank" rel="noopener noreferrer">KeyboardEvent</a></li>
      </ul>

      <p>Chris Coyier's CSS-TRICKS is always a great place for practical guides, tips, and, of course, tricks:</p>
      <ul>
        <li><a href="https://css-tricks.com/snippets/javascript/javascript-keycodes/" target="_blank" rel="noopener noreferrer">KeyboardEvent Value (keyCodes, meteKey, etc (CSS-TRICKS)</a></li> 
      </ul>

      <p>Other great articles:</p>
      <ul>
        <li><a href="https://www.section.io/engineering-education/keyboard-events-in-javascript/" target="_blank" rel="noopener noreferrer">Introduction to Keyboard Events in JavaScript</a></li>
        <li><a href="https://rapidapi.com/guides/browser-api" target="_blank" rel="noopener noreferrer">Introduction to Browser API</a></li>
      </ul>

      <p>A very cool interactive table for Keyboard Events:</p>
      <ul>
        <li><a href="https://keyevents.netlify.app/" target="_blank" rel="noopener noreferrer">Keyzz - Keyboard Events Playground</a></li>
      </ul>

      <p>A very cool interactive table for HTML character codes:</p>
      <ul>
        <li><a href="https://www.rapidtables.com/web/html/html-codes.html" target="_blank" rel="noopener noreferrer">HTML character codes (RapidTables)</a></li>
      </ul>

    </article>
  </section>
    
  <script src="assets\js\lib\prism.js"></script>
</body>
</html>
